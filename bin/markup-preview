#!/usr/bin/env ruby

$:.unshift(File.dirname(__FILE__) + '/../lib')

require 'rubygems' unless defined? Gem
require 'markup-preview-command'
require 'slop'

def main

  help = <<-EOF
useage:
markup-preview -f path/to/foo.md -o browser
or,
cat foo.md | markup-preview -m markdown -o browser
  EOF

  opts = Slop.parse do
    on :h, :help, help, :tail => true do
      puts help
      exit
    end
    on :m,  :markup=,   'markup'
    on :f,  :filepath=, 'filepath'
    on :o,  :output=,   'set "-o browser" if see result by browser'
  end

  Markup::Preview::Command::Render.execute(opts)

end

main
